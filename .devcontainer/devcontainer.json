{
	"name": "C++20 Dev Container",
	// Use the Dockerfile in the same directory
	"build": {
		"dockerfile": "Dockerfile"
	},
	// Set the user that VSCode will use inside the container
	"remoteUser": "ubuntu",
	// Map the entire project folder to /workspaces/your-project-name in the container
	"workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
	"workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/${localWorkspaceFolderBasename},type=bind,consistency=cached",
	"mounts": [
		"source=${localWorkspaceFolder}/.devcontainer/conan-profile,target=/home/ubuntu/.conan2/profiles/default,type=bind,consistency=cached",
		"source=${localEnv:HOME}/.conan2,target=/home/ubuntu/.conan2,type=bind,consistency=cached"
	],
	// Capabilities needed for debugging with gdb/lldb
	"runArgs": [
		"--cap-add=SYS_PTRACE",
		"--security-opt",
		"seccomp=unconfined"
	],
	"postStartCommand": "bash .devcontainer/install-npm.sh",
	// Environment variables for the container
	"containerEnv": {
		"CONAN_HOME": "/home/ubuntu/.conan2"
	},
	// VSCode settings to apply inside the container
	"customizations": {
		"vscode": {
			// Set the default shell to bash
			"terminal.integrated.shell.linux": "/bin/bash",
			// Disable CMake Configuration, since it depends on conan, 
			// we're not guaranteed that this will be valid
			"cmake.configureOnOpen": false,
			// Set the default compiler path
			"C_Cpp.default.compilerPath": "/usr/bin/g++",
			"settings": {
				"terminal.integrated.defaultProfile.linux": "bash",
				"cmake.configureOnOpen": true,
				"C_Cpp.default.compilerPath": "/usr/bin/g++",
				// Tell the Conan extension where to find the conan executable
				"conan.conanPath": "/usr/local/bin/conan"
			},
			"extensions": [
				"ms-vscode.cpptools-extension-pack", // Essential C/C++ tools from Microsoft
				"ms-vscode.cmake-tools", // CMake integration
				"conan.conan", // Conan extension for VSCode
				"twxs.cmake", // CMake language support
				"cheshirekow.cmake-format", // For formatting CMake files
				"matepek.vscode-catch2-test-adapter",
				"ms-azuretools.vscode-docker", // To manage Docker from within the container]
				"anthropic.claude-code",
				"qwtel.sqlite-viewer"
			]
		}
	}
}